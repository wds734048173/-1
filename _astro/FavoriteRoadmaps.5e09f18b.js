import{h as c,p}from"./hooks.module.a845df0c.js";import{o as e}from"./jsxRuntime.module.8b00cb04.js";import{a as x}from"./http.6d2b195c.js";import{S as v,M as w}from"./MarkFavorite.a30e7bf2.js";import"./preact.module.f1575aff.js";import"./jwt.f0e0aa9c.js";import"./popup.a359f713.js";function m(s){const{additionalClasses:r="mr-2 top-[0.5px] w-[20px] h-[20px]"}=s;return e("svg",{className:`relative ${r}]`,stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}function y(s){const{title:r="Start learning ..",message:a="Your progress and favorite roadmaps will show up here."}=s;return e("div",{className:"relative flex min-h-full flex-col items-start sm:items-center justify-center py-6",children:[e("h2",{className:"mb-1 flex items-center text-lg sm:text-2xl text-gray-200",children:[e(m,{additionalClasses:"mr-2 top-[0.5px] w-[16px] h-[16px] sm:w-[20px] sm:h-[20px]"}),"Start learning .."]}),e("p",{className:"text-gray-400 text-sm sm:text-base",children:a})]})}function b(s){const{progress:r,isLoading:a=!1}=s;return e("div",{className:"relative pb-12 pt-4 sm:pt-7",children:[e("p",{className:"mb-4 flex items-center text-sm text-gray-400",children:[!a&&e(m,{additionalClasses:"mr-1.5 w-[14px] h-[14px]"}),a&&e("span",{className:"mr-1.5",children:e(v,{})}),"Your progress and favorite roadmaps."]}),e("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:r.map(t=>{const n=t.resourceType==="roadmap"?`/${t.resourceId}`:`/best-practices/${t.resourceId}`,i=(t.skipped+t.done)/t.total*100;return e("a",{href:n,className:"relative flex flex-col overflow-hidden rounded-md border border-slate-800 bg-slate-900 p-3 text-sm text-slate-400 hover:border-slate-600 hover:text-slate-300",children:[e("span",{className:"relative z-20",children:t.resourceTitle}),e("span",{class:"absolute bottom-0 left-0 top-0 z-10 bg-[#172a3a]",style:{width:`${i}%`}}),e(w,{resourceId:t.resourceId,resourceType:t.resourceType,favorite:t.isFavorite})]},t.resourceId)})})]})}function I(s){s.forEach(r=>{const a=r.resourceType==="best-practice"?`/best-practices/${r.resourceId}`:`/${r.resourceId}`,t=document.querySelector(`a[href="${a}"]`);if(!t)return;window.dispatchEvent(new CustomEvent("mark-favorite",{detail:{resourceId:r.resourceId,resourceType:r.resourceType,isFavorite:r.isFavorite}}));const i=(r.done+r.skipped)/r.total*100,l=t.querySelector("[data-progress]");l&&(l.style.width=`${i}%`)})}function k(){const[s,r]=c(!0),[a,t]=c(!0),[n,i]=c([]),[l,h]=c(0);function u(){const o=document.getElementById("hero-text");o&&(o.classList.add("opacity-0"),setTimeout(()=>{o.parentElement?.removeChild(o),r(!1),setTimeout(()=>{h(100)},50)},0))}async function d(){t(!0);const{response:o,error:g}=await x("https://api.roadmap.sh/v1-get-user-all-progress");g||!o||(i(o),t(!1),u(),I(o))}if(p(()=>{d().finally(()=>{t(!1)})},[]),p(()=>(window.addEventListener("refresh-favorites",d),()=>window.removeEventListener("refresh-favorites",d)),[]),s)return null;const f=n.length>0;return e("div",{class:`flex min-h-[192px] bg-gradient-to-b transition-opacity duration-500 sm:min-h-[280px] opacity-${l} ${f&&"border-t border-t-[#1e293c]"}`,children:e("div",{className:"container min-h-full",children:[!a&&n.length==0&&e(y,{}),n.length>0&&e(b,{progress:n,isLoading:a})]})})}export{k as FavoriteRoadmaps};
